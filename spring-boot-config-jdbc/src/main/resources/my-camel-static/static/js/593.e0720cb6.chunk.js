"use strict";(self.webpackChunkmy_camel_admin=self.webpackChunkmy_camel_admin||[]).push([[593],{47593:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var i=t(74165),o=t(15861),r=t(1413),a=t(29439),l=t(72791),c=t(47022),s=t(89743),u=t(2677),d=t(9140),f=t(43360),p=t(57689),h=t(2002),x=t(36161),g=t(31243),m=t(95316),j=t(80184),Z=function(e){var n=e.showModal,t=e.hideModal,i=e.confirmModal,o=e.row,r=e.message;return(0,j.jsxs)(m.Z,{show:n,onHide:t,children:[(0,j.jsx)(m.Z.Header,{closeButton:!0,children:(0,j.jsx)(m.Z.Title,{children:"Delete Confirmation"})}),(0,j.jsx)(m.Z.Body,{children:(0,j.jsx)("div",{className:"alert alert-danger",children:r})}),(0,j.jsxs)(m.Z.Footer,{children:[(0,j.jsx)(f.Z,{variant:"default",onClick:t,children:"Cancel"}),(0,j.jsx)(f.Z,{variant:"danger",onClick:function(){return i(o)},children:"Delete"})]})]})},v=function(e){var n=e.showModal,t=e.hideModal,r=e.importConfiguration,c=(0,l.useRef)(null),s=(0,l.useState)(null),u=(0,a.Z)(s,2),d=u[0],p=u[1];function h(){return(h=(0,o.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d&&r(d);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,j.jsxs)(m.Z,{show:n,onHide:t,children:[(0,j.jsx)(m.Z.Header,{closeButton:!0,children:(0,j.jsx)(m.Z.Title,{children:"Import Spring Configurations"})}),(0,j.jsxs)(m.Z.Body,{children:[(0,j.jsx)("label",{className:"mx-3",children:"Choose file: "}),(0,j.jsx)("input",{ref:c,onChange:function(){var e;(null===(e=c.current)||void 0===e?void 0:e.files)&&p(c.current.files[0])},className:"d-none",type:"file"}),(0,j.jsx)("button",{onClick:function(){var e;null===(e=c.current)||void 0===e||e.click()},className:"btn btn-outline-".concat(d?"success":"primary"),children:d?d.name:"Upload"})]}),(0,j.jsxs)(m.Z.Footer,{children:[(0,j.jsx)(f.Z,{variant:"default",onClick:t,children:"Cancel"}),d&&(0,j.jsx)(f.Z,{variant:"danger",onClick:function(e){e.preventDefault(),function(){h.apply(this,arguments)}()},children:"Import"})]})]})};var C=function(){var e=(0,p.s0)(),n=(0,l.useState)(!1),t=(0,a.Z)(n,2),m=t[0],C=t[1],y=(0,l.useState)(!1),k=(0,a.Z)(y,2),b=k[0],w=k[1],P=(0,l.useState)(null),T=(0,a.Z)(P,2),F=T[0],N=T[1],S=(0,l.useState)([]),L=(0,a.Z)(S,2),M=L[0],D=L[1],A=(0,l.useState)(!1),E=(0,a.Z)(A,2),B=E[0],I=E[1],H=function(n){e("/integrator/configuration-form-edit",{state:(0,r.Z)({},n)})},z=function(n){e("/integrator/configuration-app-details",{state:(0,r.Z)({},n)})},_=function(e){N((function(){return e})),C((function(){return!0}))};function O(){return(O=(0,o.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete app profile",n),e.prev=1,t={method:"DELETE",headers:{"Content-Type":"application/json",accept:"*/*"},body:JSON.stringify([{application:n.application,profile:n.profile}])},I((function(){return!0})),e.next=6,fetch("/api/configurations",t).then((function(e){return e.json()})).then((function(e){D((function(){return e})),I((function(){return!1})),C((function(){return!1}))}));case 6:console.log("deleted"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var R=[{dataField:"application",text:"Application",sort:!0,editable:!1},{dataField:"profile",text:"Profile",sort:!1,editable:!1},{dataField:"label",text:"Label",sort:!1,editable:!1},{dataField:"actions",text:"Details",sort:!1,isDummyField:!0,editable:!1,formatter:function(e,n,t,i){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(f.Z,{onClick:function(){H(n)},children:"Edit"}),(0,j.jsx)(f.Z,{onClick:function(){z(n)},children:"Config"}),(0,j.jsx)(f.Z,{onClick:function(){_(n)},children:"Delete"})]})}}],U={sizePerPage:5,paginationSize:5,pageStartIndex:1,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!1,totalSize:M.length,sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"30",value:10},{text:"All",value:M.length}]};return(0,l.useEffect)((function(){I((function(){return!0})),fetch("api/configurations").then((function(e){return e.json()})).then((function(e){D((function(){return e})),I((function(){return!1}))}))}),[]),B?(0,j.jsx)("p",{children:"Loading..."}):(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(c.Z,{fluid:!0,children:[(0,j.jsx)(s.Z,{children:(0,j.jsx)(u.Z,{md:"12",children:(0,j.jsxs)(d.Z,{children:[(0,j.jsxs)(d.Z.Header,{children:[(0,j.jsx)(d.Z.Title,{as:"h4",children:"Camel Integrator Configurations"}),(0,j.jsx)("p",{className:"card-category",children:"Application profiles"}),(0,j.jsxs)("div",{className:"small form-group d-flex align-items-center justify-content-start mt-4 mb-0",children:[(0,j.jsx)(f.Z,{className:"ml-1",onClick:function(){e("/integrator/configuration-form-create")},children:"Add Application Profile"}),(0,j.jsx)(f.Z,{className:"ml-1",style:{marginLeft:"12px"},onClick:function(){var e=new Blob([JSON.stringify(M,null,2)],{type:"text/json"}),n=window.URL.createObjectURL(e),t=document.createElement("a");document.body.appendChild(t),t.href=n,t.download="spring-config.json",t.click(),document.body.removeChild(t)},children:"Export All Configurations"}),(0,j.jsx)(f.Z,{className:"ml-1",style:{marginLeft:"12px"},onClick:function(){w(!0)},children:"Import All Configurations"})]})]}),(0,j.jsx)(d.Z.Body,{children:(0,j.jsx)(s.Z,{children:(0,j.jsx)(u.Z,{md:"12",children:(0,j.jsx)(h.Z,{bootstrap4:!0,keyField:"key",data:M,columns:R,pagination:(0,x.ZP)(U),noDataIndication:"Table is empty"})})})})]})})}),(0,j.jsx)(Z,{showModal:m,confirmModal:function(e){return O.apply(this,arguments)},hideModal:function(){C(!1)},row:F,message:"Are you sure to delete configurations for application for ".concat(null===F||void 0===F?void 0:F.application,"/").concat(null===F||void 0===F?void 0:F.profile)}),(0,j.jsx)(v,{showModal:b,importConfiguration:function(e){console.log(">>>>>>>> import configuration:",e);var n=new FormData;n.append("file",e),g.Z.post("/api/import",n,{headers:{"content-type":"multipart/form-data"}}).then((function(e){console.log(e.data),D(e.data),w(!1)})).catch((function(e){console.error("Error uploading spring config: ",e),w(!1)}))},hideModal:function(){w(!1)}})]})})}}}]);
//# sourceMappingURL=593.e0720cb6.chunk.js.map
"use strict";(self.webpackChunkmy_camel_admin=self.webpackChunkmy_camel_admin||[]).push([[106],{4106:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var a=n(1356),i=n(5848),o=n(9298),l=n(9065),r=n(9239),s=n(3875),c=n(4525),d=n(1652),p=n(1473),m=n(6869),g=n(3914),h=n(1591),f=n(6947),u=n(9152);const x=e=>{let{showModal:t,hideModal:n,confirmModal:a,row:i,message:o}=e;return(0,u.jsxs)(f.A,{show:t,onHide:n,children:[(0,u.jsx)(f.A.Header,{closeButton:!0,children:(0,u.jsx)(f.A.Title,{children:"Delete Confirmation"})}),(0,u.jsx)(f.A.Body,{children:(0,u.jsx)("div",{className:"alert alert-danger",children:o})}),(0,u.jsxs)(f.A.Footer,{children:[(0,u.jsx)(c.A,{variant:"default",onClick:n,children:"Cancel"}),(0,u.jsx)(c.A,{variant:"danger",onClick:()=>a(i),children:"Delete"})]})]})},j=e=>{let{showModal:t,hideModal:n,importConfiguration:i}=e;const o=(0,a.useRef)(null),[l,r]=(0,a.useState)(null);return(0,u.jsxs)(f.A,{show:t,onHide:n,children:[(0,u.jsx)(f.A.Header,{closeButton:!0,children:(0,u.jsx)(f.A.Title,{children:"Import Spring Configurations"})}),(0,u.jsxs)(f.A.Body,{children:[(0,u.jsx)("label",{className:"mx-3",children:"Choose file: "}),(0,u.jsx)("input",{ref:o,onChange:()=>{var e;(null===(e=o.current)||void 0===e?void 0:e.files)&&r(o.current.files[0])},className:"d-none",type:"file"}),(0,u.jsx)("button",{onClick:()=>{var e;null===(e=o.current)||void 0===e||e.click()},className:"btn btn-outline-"+(l?"success":"primary"),children:l?l.name:"Upload"})]}),(0,u.jsxs)(f.A.Footer,{children:[(0,u.jsx)(c.A,{variant:"default",onClick:n,children:"Cancel"}),l&&(0,u.jsx)(c.A,{variant:"danger",onClick:e=>{e.preventDefault(),async function(){l&&i(l)}()},children:"Import"})]})]})};const A=function(){const[e]=(0,i.lT)(["XSRF-TOKEN"]),{showBoundary:t}=(0,p.M)(),n=(0,d.Zp)(),[f,A]=(0,a.useState)(!1),[y,C]=(0,a.useState)(!1),[T,v]=(0,a.useState)(!1),[k,F]=(0,a.useState)(null),[N,S]=(0,a.useState)([]),[b,w]=(0,a.useState)(!1),E=n=>{console.log(">>>>>>>> import configuration:",n);const a=new FormData;a.append("file",n);const i={headers:{"content-type":"multipart/form-data","X-XSRF-TOKEN":e["XSRF-TOKEN"]}};h.A.post("/my-camel/admin/api/spring-config/import",a,i).then((e=>{console.log(e.data),S(e.data),C(!1)})).catch((e=>{console.error("Error uploading spring config: ",e),t(e),C(!1)}))},P=n=>{console.log(">>>>>>>> import configuration:",n);const a=new FormData;a.append("file",n);const i={headers:{"content-type":"multipart/form-data",accept:"*/*","X-XSRF-TOKEN":e["XSRF-TOKEN"]}};h.A.post("/my-camel/admin/api/spring-config/sql",a,i).then((e=>{console.log(e.data),S(e.data),v(!1)})).catch((e=>{console.error("Error uploading spring config: ",e),t(e),v(!1)}))},M=()=>{C(!1)},L=()=>{v(!1)},D=()=>{A(!1)},O=()=>{const e=new Blob([JSON.stringify(N,null,2)],{type:"text/json"}),t=window.URL.createObjectURL(e),n=document.createElement("a");document.body.appendChild(n),n.href=t,n.download="spring-config.json",n.click(),document.body.removeChild(n)},R=e=>{n("/integrator/configuration-form-edit",{state:{...e}})},X=e=>{n("/integrator/configuration-app-details",{state:{...e}})},B=e=>{F((()=>e)),A((()=>!0))},I=[{dataField:"application",text:"Application",sort:!0,editable:!1},{dataField:"profile",text:"Profile",sort:!1,editable:!1},{dataField:"label",text:"Label",sort:!1,editable:!1},{dataField:"actions",text:"Details",sort:!1,isDummyField:!0,editable:!1,formatter:(e,t,n,a)=>(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(c.A,{onClick:()=>{R(t)},children:"Edit"}),(0,u.jsx)(c.A,{onClick:()=>{X(t)},children:"Config"}),(0,u.jsx)(c.A,{onClick:()=>{B(t)},children:"Delete"})]})}],K={sizePerPage:5,paginationSize:5,pageStartIndex:1,firstPageText:"First",prePageText:"Back",nextPageText:"Next",lastPageText:"Last",nextPageTitle:"First page",prePageTitle:"Pre page",firstPageTitle:"Next page",lastPageTitle:"Last page",showTotal:!1,totalSize:N.length,sizePerPageList:[{text:"5",value:5},{text:"10",value:10},{text:"30",value:10},{text:"All",value:N.length}]};return(0,a.useEffect)((()=>{w((()=>!0)),fetch("/my-camel/admin/api/spring-config/configurations").then((e=>e.json())).then((e=>{S((()=>e)),w((()=>!1))})).catch((e=>{t(e)}))}),[]),b?(0,u.jsx)("p",{children:"Loading..."}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(o.A,{fluid:!0,children:[(0,u.jsx)(l.A,{children:(0,u.jsx)(r.A,{md:"12",children:(0,u.jsxs)(s.A,{children:[(0,u.jsxs)(s.A.Header,{children:[(0,u.jsx)(s.A.Title,{as:"h4",children:"Camel Integrator Configurations"}),(0,u.jsx)("p",{className:"card-category",children:"Application profiles"}),(0,u.jsxs)("div",{className:"small form-group d-flex align-items-center justify-content-start mt-4 mb-0",children:[(0,u.jsx)(c.A,{className:"ml-1",onClick:()=>{n("/integrator/configuration-form-create")},children:"Add Application Profile"}),(0,u.jsx)(c.A,{className:"ml-1",style:{marginLeft:"12px"},onClick:O,children:"Export All Configurations"}),(0,u.jsx)(c.A,{className:"ml-1",style:{marginLeft:"12px"},onClick:()=>{C(!0)},children:"Import All Configurations"}),(0,u.jsx)(c.A,{className:"ml-1",style:{marginLeft:"12px"},onClick:()=>{v(!0)},children:"Import SQL"})]})]}),(0,u.jsx)(s.A.Body,{children:(0,u.jsx)(l.A,{children:(0,u.jsx)(r.A,{md:"12",children:(0,u.jsx)(m.A,{bootstrap4:!0,keyField:"key",data:N,columns:I,pagination:(0,g.Ay)(K),noDataIndication:"Table is empty"})})})})]})})}),(0,u.jsx)(x,{showModal:f,confirmModal:async function(n){console.log("delete app profile",n);try{const t={method:"DELETE",headers:{"Content-Type":"application/json",accept:"*/*","X-XSRF-TOKEN":e["XSRF-TOKEN"]},body:JSON.stringify([{application:n.application,profile:n.profile}])};w((()=>!0)),await fetch("/my-camel/admin/api/spring-config/configurations",t).then((e=>e.json())).then((e=>{S((()=>e)),w((()=>!1)),A((()=>!1))})),console.log("deleted")}catch(a){console.log(a),t(a)}},hideModal:D,row:k,message:`Are you sure to delete configurations for application for ${null===k||void 0===k?void 0:k.application}/${null===k||void 0===k?void 0:k.profile}`}),(0,u.jsx)(j,{showModal:y,importConfiguration:E,hideModal:M}),(0,u.jsx)(j,{showModal:T,importConfiguration:P,hideModal:L})]})})}}}]);
//# sourceMappingURL=106.2022754a.chunk.js.map